<html xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      py:strip="">

<th id="plugin_${name}" class="plugin_${name}" py:def="date_header(name, instance)">
    Date<br />
    [Duration]
</th>

<py:def function="date_data(name, instance, data, plugin_data)">
    <?python from tg.i18n import get_lang ?>
    <?python from babel import Locale ?>
    <?python from vigilo.turbogears.helpers import get_locales ?>
    <py:with vars="state = StateName.value_to_statename(data[0].cause.current_state);
        locale = Locale.negotiate(get_lang(), get_locales('vigiboard'), sep='-')">
        <td class="plugin_${name} ${state}">
        ${data[0].cause.get_date('timestamp', locale)}<br/>
        [${data[0].get_since_date('timestamp_active', locale)}]
        </td>
    </py:with>
</py:def>

<py:def function="plugin_template(name, instance)">
    <?python
        plugin_header_functions[name] = date_header
        plugin_data_functions[name] = date_data
    ?>
</py:def>

</html>
