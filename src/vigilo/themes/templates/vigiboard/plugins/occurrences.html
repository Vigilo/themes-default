<html xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      py:strip="">

<th id="plugin_${name}" class="plugin_${name}" py:def="occurrences_header(name, instance, sort, order)" title="Occurrences count">
    <py:with vars="next_order=(sort != name) and 'asc' or {'asc': 'desc', 'desc': 'asc'}[order]">
        <a id="sortLink" title="${{
                'asc': l_('Sort by %s in ascending order'),
                'desc': l_('Sort by %s in descending order'),
            }[next_order] % l_('Occurrences count').lower()}"
            href="${tg.url('/', params=fixed_search, sort=name, order=next_order, page=page.page)}">
            #
            <img src="${tg.url('/images/' + order + '.gif')}" py:if="sort == name"/>
        </a>
    </py:with>
</th>

<py:def function="occurrences_data(name, instance, data, plugin_data)">
    <td class="plugin_${name} ${data['state']}">${data['occurrences']}</td>
</py:def>

<py:def function="plugin_template(name, instance)">
    <?python
        plugin_header_functions[name] = occurrences_header
        plugin_data_functions[name] = occurrences_data
    ?>
</py:def>

</html>
